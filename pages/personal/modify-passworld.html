<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>修改密码</title>
    <link rel="stylesheet" href="../../lib/weui/weui.min.css">
    <link rel="stylesheet" href="../../lib/weui/jquery-weui.min.css">
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../iconfont/iconfont.css">
    <script src="../../lib/zepto/zepto.min.js"></script>
    <link rel="stylesheet" href="../../css/personal/modify-passworld.css">
    <script src="../../js/common.js"></script>
</head>
<body>
<!--标题-->
<div id="header" data-position="fixed" data-tap-toggle="false">
    <div class="header">
        <a class="back iconfont icon-zuojiantou" href="../../index.html"></a>
        <div class="h1 title">FIFO私教管理平台</div>
        <div class="zimu"></div>
    </div>
</div>
<div class="content">
    <div class="title">
        <p>更改密码</p>
    </div>
    <div class="form">
        <form id="modify">
           <ul>
               <li>
                   <div class="weui-cell weui-cell_vcode">
                       <div class="weui-cell__hd">
                           <label class="weui-label">账号</label>
                       </div>
                       <div class="weui-cell__bd">
                           <input name="account" class="weui-input" type="text" placeholder="请输入账号">
                       </div>
                   </div>
               </li>
               <li>
                   <div class="weui-cell weui-cell_vcode">
                       <div class="weui-cell__hd">
                           <label class="weui-label">原密码</label>
                       </div>
                       <div class="weui-cell__bd">
                           <input name="oldpass" class="weui-input tel" type="password" placeholder="请输入原密码">
                       </div>
                   </div>
               </li>
               <li>
                   <div class="weui-cell weui-cell_vcode">
                       <div class="weui-cell__hd">
                           <label class="weui-label">新密码</label>
                       </div>
                       <div class="weui-cell__bd">
                           <input name="newpass" class="weui-input" type="password" placeholder="请输入新密码">
                       </div>
                   </div>
               </li>
               <li>
                   <div class="weui-cell weui-cell_vcode">
                       <div class="weui-cell__hd">
                           <label class="weui-label">再次确认</label>
                       </div>
                       <div class="weui-cell__bd">
                           <input name="conform" class="weui-input conform" type="password" placeholder="请再次确认密码">
                       </div>
                   </div>
               </li>
           </ul>

            <a href="javascript:;" class="weui-btn weui-btn_primary" id="submit">修改并重新登录</a>
        </form>
        <script>
            $('.conform').on('blur', function () {
                var data = getFormData('modify');
                if(!data.newpass) {
                    alert('请先输入新密码');
                    $(this).val('');
                    return false;
                }
                if($(this).val() != data.newpass) {
                    alert('两次密码输入不同');
                }
            });

            $('#submit').on('click', function () {
                //用于提交后台的数据
                var data = getFormData('modify');
                console.log(data);
                if(!data.account) {
                    alert('请输入帐号');
                    return false;
                }
                if(!data.oldpass) {
                    alert('请输入原密码');
                    return false;
                }
                if(!data.newpass) {
                    alert('请输入新密码');
                    return false;
                }
                if(!data.conform) {
                    alert('请再次确认密码');
                    return false;
                }
                $.ajax({
                    url: '', //提交的地址
                    data: data,
                    type: 'POST',
                    success: function (res) {
                        //登录成功的回调
                        location.href = './login.html';
                    }
                });
            });
        </script>
    </div>
</div>
</body>
</html>